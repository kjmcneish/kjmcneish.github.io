{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The primary classes you’ll use when connecting and disconnecting Apple Health are the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk\/IntegrationController"},{"type":"text","text":" and its associated "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk\/IntegrationEntity"},{"type":"text","text":" class."}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Note:"}]},{"type":"text","text":" Before reading this topic, make sure you have read the information on retrieving a list of integration sources, in the main topic "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk\/ConnectingSourcesIntegrationController"},{"type":"text","text":"."}]},{"anchor":"Connecting-Apple-Health","level":3,"type":"heading","text":"Connecting Apple Health"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk\/IntegrationEntity"},{"type":"text","text":" object’s "},{"type":"strong","inlineContent":[{"type":"text","text":"url"}]},{"type":"text","text":" is set to “healthkit2” and its "},{"type":"strong","inlineContent":[{"type":"text","text":"auth_type"}]},{"type":"text","text":" property is set to “upload”, you call the "},{"type":"strong","inlineContent":[{"type":"text","text":"IntegrationController.connectHealthKit()"}]},{"type":"text","text":" method to connect it. When the upload is fully completed, the IntegrationController returns from the "},{"type":"strong","inlineContent":[{"type":"text","text":"connectHealthKit()"}]},{"type":"text","text":" method, returning true if successful, otherwise, false and an error message."}]},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk\/IntegrationController\/connectHealthKit(completion:)"}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Example"}]}]},{"type":"codeListing","syntax":"swift","code":["","self.integrationController?.connectHealthKit { ","    success, errorMessage in","","    \/\/ Display upload completion","}"]},{"anchor":"Displaying-Upload-Progress","level":4,"type":"heading","text":"Displaying Upload Progress"},{"type":"paragraph","inlineContent":[{"type":"text","text":"As soon as you connect Apple Health, the IntegrationController begins uploading the user’s HealthKit data to the Heads Up Cloud. To provide continuous progress updates, the IntegrationController has an "},{"type":"strong","inlineContent":[{"type":"text","text":"updateProgressDelegate"}]},{"type":"text","text":" property that stores a reference to an object that implements the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk\/HealthKitUploadProgressDelegate"},{"type":"text","text":" protocol. This protocol contains a single "},{"type":"strong","inlineContent":[{"type":"text","text":"updateProgress()"}]},{"type":"text","text":" method:"}]},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk\/HealthKitUploadProgressDelegate\/updateProgress(current:total:metricName:)"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Each time a new HealthKit metric is uploaded, the IntegrationController calls the "},{"type":"strong","inlineContent":[{"type":"text","text":"updateProgress()"}]},{"type":"text","text":" method on the delegate, passing the current number of the metric it’s processing, the total number of metrics to be processed, and the name of the metric currently being processed. You can use this information to display progress to the user so they know how far along they are in the upload."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In the following example, notice the following:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"strong","inlineContent":[{"type":"text","text":"AddSourceViewController"}]},{"type":"text","text":" class adopts the "},{"type":"strong","inlineContent":[{"type":"text","text":"HealthKitUploadProgressDelegate"}]},{"type":"text","text":" protocol."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In its "},{"type":"strong","inlineContent":[{"type":"text","text":"viewDidLoad()"}]},{"type":"text","text":" method, it instantiates an IntegrationController object and stores a reference to itself in the IntegrationController’s "},{"type":"strong","inlineContent":[{"type":"text","text":"updateProgressDelegate"}]},{"type":"text","text":" property."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"As the IntegrationController processes each metric, it calls the AddSourceViewController’s "},{"type":"strong","inlineContent":[{"type":"text","text":"updateProgress()"}]},{"type":"text","text":" method, passing information on the progress of the HealthKit upload."}]}]}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Example"}]}]},{"type":"codeListing","syntax":"swift","code":["class AddSourceViewController: UIViewController, HealthKitUploadProgressDelegate, {","","    var integrationController: IntegrationController<IntegrationEntity>?","","    override func viewDidLoad() {","        super.viewDidLoad()","","        if let userInfo = UserController.userEntity {","            self.integrationController = IntegrationController(userInfo: userInfo)","            self.integrationController?.updateProgressDelegate = self","            self.appleHealthUploadController = AHUploadController","        }","    }","","    func updateProgress(current: Int, total: Int, metricName: String) {","        let percentage = Double(current) \/ Double(total)","        self.appleHealthUploadController?.lblProgressText.text = \"\\(current) of \\(total) (\\(metricName))\"","        self.appleHealthUploadController?.progressBar.setProgress(Float(percentage), animated: true)","    }","}"]},{"anchor":"Disconnecting-Apple-Health","level":3,"type":"heading","text":"Disconnecting Apple Health"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To disconnect Apple Health, just call the "},{"type":"strong","inlineContent":[{"type":"text","text":"IntegrationController.disconnectHealthKit()"}]},{"type":"text","text":" method."}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Example"}]}]},{"type":"codeListing","syntax":"swift","code":["self.integrationController?.disconnectHealthKit(    ) { ","    succcess, errorMessage in","","}"]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/headsup_mobile_sdk\/connectingsourcesapplehealth"],"traits":[{"interfaceLanguage":"swift"}]},{"paths":["\/documentation\/headsup_mobile_sdk\/connectingsourcesapplehealth"],"traits":[{"interfaceLanguage":"occ"}]}],"identifier":{"url":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk\/ConnectingSourcesAppleHealth","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"This topic shows you how to connect and disconnect Apple Health."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Connecting and Disconnecting Apple Health","role":"article","modules":[{"name":"headsup_mobile_sdk"}]},"hierarchy":{"paths":[["doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk"]]},"references":{"doc://com.headsuphealth.headsup-mobile-sdk/documentation/headsup_mobile_sdk/HealthKitUploadProgressDelegate":{"role":"symbol","title":"HealthKitUploadProgressDelegate","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"HealthKitUploadProgressDelegate"}],"abstract":[{"type":"text","text":"HealthKit Upload Progress Delegate"}],"identifier":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk\/HealthKitUploadProgressDelegate","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"HealthKitUploadProgressDelegate"}],"url":"\/documentation\/headsup_mobile_sdk\/healthkituploadprogressdelegate"},"doc://com.headsuphealth.headsup-mobile-sdk/documentation/headsup_mobile_sdk/HealthKitUploadProgressDelegate/updateProgress(current:total:metricName:)":{"role":"symbol","title":"updateProgress(current:total:metricName:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"updateProgress"},{"kind":"text","text":"("},{"kind":"externalParam","text":"current"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"},{"kind":"text","text":", "},{"kind":"externalParam","text":"total"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"},{"kind":"text","text":", "},{"kind":"externalParam","text":"metricName"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Update the upload progress"}],"identifier":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk\/HealthKitUploadProgressDelegate\/updateProgress(current:total:metricName:)","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/headsup_mobile_sdk\/healthkituploadprogressdelegate\/updateprogress(current:total:metricname:)"},"doc://com.headsuphealth.headsup-mobile-sdk/documentation/headsup_mobile_sdk/IntegrationEntity":{"role":"symbol","title":"IntegrationEntity","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"IntegrationEntity"}],"abstract":[{"type":"text","text":"Integration Source Entity"}],"identifier":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk\/IntegrationEntity","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"IntegrationEntity"}],"url":"\/documentation\/headsup_mobile_sdk\/integrationentity"},"doc://com.headsuphealth.headsup-mobile-sdk/documentation/headsup_mobile_sdk/IntegrationController":{"role":"symbol","title":"IntegrationController","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"IntegrationController"}],"abstract":[{"type":"text","text":"\/\/\/ Integration Business Controller - API for Heads Up integration sources such as  Oura, Dexcom, Fitbit, etc."}],"identifier":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk\/IntegrationController","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"IntegrationController"}],"url":"\/documentation\/headsup_mobile_sdk\/integrationcontroller"},"doc://com.headsuphealth.headsup-mobile-sdk/documentation/headsup_mobile_sdk/ConnectingSourcesIntegrationController":{"role":"article","title":"Getting a List of Integration Sources with the IntegrationController","abstract":[{"type":"text","text":"This topic shows you how to retrieve a list of integration sources using the IntegrationController class."}],"identifier":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk\/ConnectingSourcesIntegrationController","kind":"article","type":"topic","url":"\/documentation\/headsup_mobile_sdk\/connectingsourcesintegrationcontroller"},"doc://com.headsuphealth.headsup-mobile-sdk/documentation/headsup_mobile_sdk":{"role":"collection","title":"headsup_mobile_sdk","abstract":[{"type":"text","text":"This documentation describes how to access the services in the Heads Up Mobile SDK from your own iOS mobile app. The SDK is written in Swift and is available as a Swift Framework."}],"identifier":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk","kind":"symbol","type":"topic","url":"\/documentation\/headsup_mobile_sdk"},"doc://com.headsuphealth.headsup-mobile-sdk/documentation/headsup_mobile_sdk/IntegrationController/connectHealthKit(completion:)":{"role":"symbol","title":"connectHealthKit(completion:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"connectHealthKit"},{"kind":"text","text":"("},{"kind":"externalParam","text":"completion"},{"kind":"text","text":": ("},{"kind":"externalParam","text":"_"},{"kind":"text","text":" "},{"kind":"internalParam","text":"succcess"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":", "},{"kind":"externalParam","text":"_"},{"kind":"text","text":" "},{"kind":"internalParam","text":"errorMessage"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"?) -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Connect HealthKit"}],"identifier":"doc:\/\/com.headsuphealth.headsup-mobile-sdk\/documentation\/headsup_mobile_sdk\/IntegrationController\/connectHealthKit(completion:)","kind":"symbol","type":"topic","url":"\/documentation\/headsup_mobile_sdk\/integrationcontroller\/connecthealthkit(completion:)"}},"variantOverrides":[{"patch":[{"op":"replace","path":"\/identifier\/interfaceLanguage","value":"occ"},{"op":"add","path":"\/topicSections","value":null},{"op":"add","path":"\/seeAlsoSections","value":null}],"traits":[{"interfaceLanguage":"occ"}]}]}